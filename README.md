# AWS リソース・コスト レポート

AWSのリソース利用状況と費用を定期的に調査し、マークダウン形式でレポートを生成するツールです。

## 概要

本ツールは以下の機能を提供します：

- AWS Cost Explorer APIを使用して、リソースごとのコスト情報を取得
- AWS Resource Explorerを使用して、現在利用中のリソースの詳細情報を取得
- 取得したデータを分析し、リソースタイプ、インスタンスタイプ、リージョンごとのコスト分析
- 定期的なレポート生成（GitHub Actionsによる自動実行）
- マークダウン形式でのレポート出力

## 前提条件

- AWSアカウントへのアクセス権限
- 適切なIAMポリシー設定（Cost Explorer, Resource Explorer, その他必要なAWSサービスへのアクセス）
- GitHub ActionsのSecretsにAWSの認証情報を設定

## セットアップ方法

1. このリポジトリをクローンまたはフォークします。
2. GitHub リポジトリの Settings > Secrets and variables > Actions に以下のシークレットを追加します：
   - `AWS_ACCESS_KEY_ID`: AWSのアクセスキーID
   - `AWS_SECRET_ACCESS_KEY`: AWSのシークレットアクセスキー
   - `AWS_DEFAULT_REGION`: デフォルトのAWSリージョン（例：`ap-northeast-1`）

3. 必要に応じて `.github/workflows/generate-report.yml` ファイルの実行スケジュールを調整します。

## 使用方法

### 手動実行

1. 以下のコマンドを実行してスクリプトを手動で実行します：

```bash
python src/main.py
```

2. `reports/` ディレクトリに生成されたレポートを確認します。

### GitHub Actionsによる自動実行

- デフォルトでは毎週月曜日の午前9時（UTC）に自動実行されます。
- GitHub リポジトリの "Actions" タブから手動で実行することもできます。
- 生成されたレポートは `reports/` ディレクトリに保存され、コミットされます。

## レポートの内容

生成されるレポートには以下の情報が含まれます：

1. **概要**
   - 総コスト
   - 前月比
   - 最もコストがかかっているサービス・リソース

2. **サービス別コスト内訳**
   - EC2, RDS, S3などのサービス別コスト
   - 前月比の増減

3. **リソース詳細**
   - インスタンスタイプ
   - リージョン
   - 料金体系（オンデマンド/リザーブド/スポット）
   - 利用開始日
   - 月間コスト

4. **コスト最適化の推奨事項**
   - 低利用リソースの特定
   - コスト削減のための推奨事項

## カスタマイズ

- `config.yml` ファイルを編集することで、レポートの内容やフォーマットをカスタマイズできます。
- 追加のAWSサービスを調査対象に加える場合は、`src/collectors/` ディレクトリにコレクターを追加します。

## ライセンス

MIT
